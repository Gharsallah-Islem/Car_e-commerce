<div class="conversation-list">
    <!-- Header -->
    <div class="list-header">
        <h2>Chats</h2>
        <button class="new-chat-btn" (click)="startNewChat()" title="Start new chat">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" />
            </svg>
        </button>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="loading && conversations.length === 0">
        <div class="spinner"></div>
        <p>Loading conversations...</p>
    </div>

    <!-- Conversation Items -->
    <div class="conversation-items" *ngIf="!loading || conversations.length > 0">
        <div *ngFor="let conv of conversations; trackBy: trackByConvId" class="conversation-item"
            [class.active]="selectedConversationId === conv.id" [class.unread]="hasUnread(conv)"
            (click)="selectConversation(conv.id)">

            <!-- Avatar -->
            <div class="conversation-avatar">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#00a884">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span class="unread-indicator" *ngIf="hasUnread(conv)"></span>
            </div>

            <!-- Content -->
            <div class="conversation-content">
                <div class="conversation-header">
                    <h3 class="conversation-name">{{ conv.title || 'Support Chat' }}</h3>
                    <span class="conversation-time">{{ getFormattedTime(conv.updatedAt) }}</span>
                </div>

                <div class="conversation-preview">
                    <p class="last-message" [class.bold]="hasUnread(conv)">
                        {{ conv.lastMessage?.content || 'Start a conversation...' }}
                    </p>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="conversations.length === 0 && !loading">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="#8696a0">
                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z" />
            </svg>
            <p>No conversations yet</p>
            <button class="start-chat-inline" (click)="startNewChat()">Start your first chat</button>
        </div>
    </div>
</div>