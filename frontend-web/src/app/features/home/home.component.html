<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content-wrapper">
        <div class="hero-content fade-in">
            <div class="hero-badge">
                <mat-icon>verified</mat-icon>
                <span>Premium Auto Parts</span>
            </div>
            <h1 class="hero-title">
                The Ultimate <br>
                <span class="gradient-text">Driving Experience.</span>
            </h1>
            <p class="hero-subtitle">
                Engineered for performance. Designed for reliability.
                Discover the highest quality parts for your vehicle.
            </p>
            <div class="hero-actions">
                <button class="cta-button primary" (click)="scrollToSection('products')">
                    Shop Now
                </button>
                <button class="cta-button secondary" routerLink="/ai-mechanic">
                    <mat-icon>psychology</mat-icon>
                    <span>AI Diagnostic</span>
                </button>
            </div>
            <div class="hero-stats">
                @for (stat of stats; track stat.label) {
                <div class="stat-item">
                    <div class="stat-value">{{ stat.value }}</div>
                    <div class="stat-label">{{ stat.label }}</div>
                </div>
                }
            </div>
        </div>
        <div class="hero-visual fade-in">
            <div class="hero-image-container">
                <div class="glow-effect"></div>
                <img src="https://pngimg.com/d/engine_PNG36.png" alt="Premium Auto Part" class="hero-image">
            </div>
            <div class="floating-card card-1">
                <mat-icon>verified_user</mat-icon>
                <span>OEM Certified</span>
            </div>
            <div class="floating-card card-2">
                <mat-icon>bolt</mat-icon>
                <span>Fast Delivery</span>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <mat-icon>local_shipping</mat-icon>
                </div>
                <h3>Express Delivery</h3>
                <p>Get your parts delivered within 24-48 hours anywhere in Tunisia.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <mat-icon>workspace_premium</mat-icon>
                </div>
                <h3>Premium Quality</h3>
                <p>100% authentic parts from top manufacturers with warranty.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <mat-icon>support_agent</mat-icon>
                </div>
                <h3>Expert Support</h3>
                <p>Our team of mechanics is available 24/7 to assist you.</p>
            </div>
        </div>
    </div>
</section>

<!-- AI Personalized Recommendations Section -->
@if (isLoggedIn() && personalizedProducts().length > 0) {
<section class="personalized-section">
    <div class="container">
        <!-- Section Intro with elegant line -->
        <div class="section-intro">
            <div class="intro-line"></div>
            <div class="intro-content">
                <div class="intro-badge">
                    <span class="badge-pulse"></span>
                    <mat-icon>auto_awesome</mat-icon>
                    <span>AI-Powered</span>
                </div>
                <h2>Curated For You</h2>
                <p>Intelligent recommendations tailored to your automotive preferences</p>
            </div>
        </div>

        @if (isLoadingPersonalized()) {
        <div class="loading-state">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
        } @else {
        <div class="premium-grid">
            @for (product of personalizedProducts(); track product.id; let i = $index) {
            <article class="premium-card" [routerLink]="['/products', product.id]">
                <div class="card-image">
                    <div class="image-badge">
                        <mat-icon>psychology</mat-icon>
                    </div>
                    <div class="image-wrapper">
                        <img [src]="product.imageUrl || 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=400&h=300&fit=crop'"
                            [alt]="product.name" loading="lazy">
                    </div>
                    <div class="card-overlay">
                        <span class="overlay-text">View Details</span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-meta">
                        <span class="meta-category">{{ product.category || 'Auto Parts' }}</span>
                        <span class="meta-ai">AI Pick</span>
                    </div>
                    <h3 class="card-title">{{ product.name }}</h3>
                    <div class="card-footer">
                        <span class="footer-price">{{ product.price | number:'1.2-2' }} <small>TND</small></span>
                        <button class="footer-btn">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </article>
            }
        </div>
        }
    </div>
</section>
}

<!-- Categories Section -->
<section id="categories" class="categories-section">
    <div class="container">
        <div class="section-header">
            <span class="section-badge">Categories</span>
            <h2 class="section-title">Find Your Part.</h2>
            <p class="section-subtitle">Browse our extensive catalog by category.</p>
        </div>

        @if (isLoadingCategories()) {
        <div class="loading-state">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
        } @else {
        <div class="categories-grid">
            @for (category of categories(); track category.id) {
            <div class="category-card" matRipple [routerLink]="['/products']" [queryParams]="{categoryId: category.id}">
                <div class="category-bg" [style.backgroundImage]="'url(' + category.imageUrl + ')'"></div>
                <div class="category-overlay"></div>
                <div class="category-content">
                    <div class="category-info">
                        <h3>{{ category.name }}</h3>
                        <p>{{ category.description }}</p>
                    </div>
                    <div class="category-arrow">
                        <mat-icon>arrow_forward</mat-icon>
                    </div>
                </div>
            </div>
            }
        </div>
        }
    </div>
</section>

<!-- Featured Products Section -->
<section id="products" class="products-section">
    <div class="container">
        <div class="section-header">
            <span class="section-badge">New Arrivals</span>
            <h2 class="section-title">Latest Products.</h2>
            <p class="section-subtitle">Upgrade your vehicle with our newest additions.</p>
        </div>

        @if (isLoadingProducts()) {
        <div class="loading-state">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
        } @else {
        <div class="products-grid">
            @for (product of featuredProducts(); track product.id) {
            <div class="product-card" [routerLink]="['/products', product.id]">
                <div class="product-image-wrapper">
                    @if (product.stock < 5 && product.stock> 0) {
                        <div class="badge low-stock">Low Stock</div>
                        } @else if (product.stock === 0) {
                        <div class="badge out-of-stock">Sold Out</div>
                        } @else {
                        <div class="badge new">New</div>
                        }
                        <img [src]="product.imageUrl || 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=400&h=300&fit=crop'"
                            [alt]="product.name">
                </div>
                <mat-card-content>
                    <div class="product-category">{{ product.category || 'Auto Parts' }}</div>
                    <h3 class="product-name">{{ product.name }}</h3>
                    <div class="product-price">
                        {{ product.price | number:'1.2-2' }} TND
                    </div>
                </mat-card-content>
            </div>
            }
        </div>
        }
    </div>
</section>

<!-- Trending Products Section -->
@if (trendingProducts().length > 0) {
<section class="trending-section-elegant">
    <div class="container">
        <!-- Section Header with Actions -->
        <div class="section-header-flex">
            <div class="header-main">
                <div class="header-icon">
                    <mat-icon>trending_up</mat-icon>
                </div>
                <div class="header-text">
                    <span class="header-label">Trending Now</span>
                    <h2>Popular This Week</h2>
                </div>
            </div>
            <a routerLink="/products" class="header-action">
                <span>View All</span>
                <mat-icon>east</mat-icon>
            </a>
        </div>

        @if (isLoadingTrending()) {
        <div class="loading-state">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
        } @else {
        <div class="trending-grid">
            @for (product of trendingProducts(); track product.id; let i = $index) {
            <a class="trending-card" [routerLink]="['/products', product.id]">
                <div class="trending-rank" [class.top-three]="i < 3">
                    <span>{{ i + 1 }}</span>
                </div>
                <div class="trending-image">
                    <img [src]="product.imageUrl || 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=400&h=300&fit=crop'"
                        [alt]="product.name">
                </div>
                <div class="trending-content">
                    <span class="trending-category">{{ product.category || 'Auto Parts' }}</span>
                    <h4 class="trending-name">{{ product.name }}</h4>
                    <div class="trending-bottom">
                        <span class="trending-price">{{ product.price | number:'1.2-2' }} TND</span>
                        <div class="trending-arrow">
                            <mat-icon>arrow_forward</mat-icon>
                        </div>
                    </div>
                </div>
            </a>
            }
        </div>
        }
    </div>
</section>
}

<!-- CTA Section -->
<section class="cta-section-elegant">
    <div class="container">
        <div class="cta-wrapper">
            <div class="cta-decoration">
                <div class="decoration-circle circle-1"></div>
                <div class="decoration-circle circle-2"></div>
            </div>
            <div class="cta-inner">
                <div class="cta-icon-container">
                    <div class="icon-ring"></div>
                    <mat-icon>psychology</mat-icon>
                </div>
                <h2>Not sure what's wrong?</h2>
                <p>Our AI-powered diagnostic tool can identify issues and recommend the right parts instantly.</p>
                <button class="cta-primary-btn" routerLink="/ai-mechanic">
                    <span>Try AI Mechanic</span>
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>
    </div>
</section>